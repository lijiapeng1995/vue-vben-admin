import{q as L,h as R,e as z}from"./index.js";import{u as C}from"./useContentViewHeight-4ea1ac81.js";import{i as E}from"./antd-2f1e67c0.js";import{d as W,f as o,c as $,u as s,o as k,b as B,Z as M,_ as F,l as N,a9 as V,$ as b,a1 as p,af as g}from"./vue-f962b0e4.js";import{u as q}from"./useWindowSizeFn-844b46eb.js";const D=["src"],I=W({__name:"index",props:{frameSrc:L.string.def("")},emits:["message"],setup(_,{expose:h,emit:v}){const a=o(!0),w=o(50),r=o(window.innerHeight),n=o(),{headerHeightRef:x}=C(),{prefixCls:c}=R("iframe-page");q(d,{wait:150,immediate:!0});const l=$(()=>({height:`${s(r)}px`}));function d(){const e=s(n);if(!e)return;const t=x.value;w.value=t,r.value=window.innerHeight-t;const i=document.documentElement.clientHeight-t;e.style.height=`${i}px`}function y(){a.value=!1,d()}const m=e=>{v("message",e.data)},H=(e,t,i)=>{var f;const u=s(n);u&&((f=u.contentWindow)==null||f.postMessage(e,t,i))},S=()=>{var t;a.value=!0;const e=n.value;e&&((t=e.contentWindow)==null||t.location.reload(),a.value=!1)};return k(()=>{window.addEventListener("message",m)}),B(()=>{window.removeEventListener("message",m)}),h({postMessage:H,reload:S}),(e,t)=>(M(),F("div",{class:p(s(c)),style:g(l.value)},[N(s(E),{spinning:a.value,size:"large",style:g(l.value)},{default:V(()=>[b("iframe",{src:_.frameSrc,class:p(`${s(c)}__main`),ref_key:"frameRef",ref:n,onLoad:y},null,42,D)]),_:1},8,["spinning","style"])],6))}});const A=z(I,[["__scopeId","data-v-4898d6d7"]]);export{A as default};
