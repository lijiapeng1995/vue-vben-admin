var Z=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var z=(e,u,b)=>u in e?Z(e,u,{enumerable:!0,configurable:!0,writable:!0,value:b}):e[u]=b,f=(e,u)=>{for(var b in u||(u={}))oe.call(u,b)&&z(e,b,u[b]);if(W)for(var b of W(u))se.call(u,b)&&z(e,b,u[b]);return e},E=(e,u)=>ee(e,te(u));import{c as O,u as o,d as ne,G as le,n as ae,l as g,i as re,ac as H,z as ce,E as ie}from"./vue-f962b0e4.js";import{c as J}from"./componentMap-f7f5ce27.js";import{n as P,z as $,i as de,a6 as fe,c as ue,a7 as me,a8 as he,a9 as be}from"./index.js";import{i as pe,N as K,c as G,s as ge}from"./helper-b0407d84.js";import{i as ye}from"./isNumber-f0336cfd.js";import{i as F}from"./isBoolean-9388e2d6.js";import{q as U,E as Ce,y as Q}from"./antd-2f1e67c0.js";function Pe(e){return"slot"in e}function xe(e){return!Pe(e)}function we(e,u){return O(()=>{const b=o(e),{labelCol:v={},wrapperCol:k={}}=b.itemProps||{},{labelWidth:q,disabledLabelWidth:p}=b,{labelWidth:y,labelCol:I,wrapperCol:L,layout:N}=o(u);if(!y&&!q&&!I||p)return v.style={textAlign:"left"},{labelCol:v,wrapperCol:k};let x=q||y;const V=f(f({},I),v),D=f(f({},L),k);return x&&(x=ye(x)?`${x}px`:x),{labelCol:f({style:{width:x}},V),wrapperCol:f({style:{width:N==="vertical"?"100%":`calc(100% - ${x})`}},D)}})}function _(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!re(e)}const De=ne({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:u}){const{t:b}=de(),{schema:v,formProps:k}=le(e),q=we(v,k),p=O(()=>{const{allDefaultValues:s,formModel:t,schema:r}=e,{mergeDynamicData:l}=e.formProps;return{field:r.field,model:t,values:f(f(f({},l),s),t),schema:r}}),y=O(()=>{var a;const{schema:s,tableAction:t,formModel:r,formActionType:l}=e;let{componentProps:n={}}=s;return P(n)&&(n=(a=n({schema:s,tableAction:t,formModel:r,formActionType:l}))!=null?a:{}),pe(s.component)&&(n=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},n)),n}),I=O(()=>{const{disabled:s}=e.formProps,{dynamicDisabled:t}=e.schema,{disabled:r=!1}=o(y);let l=!!s||r;return F(t)&&(l=t),P(t)&&(l=t(o(p))),l}),L=O(()=>{const{readonly:s}=e.formProps,{dynamicReadonly:t}=e.schema,{readonly:r=!1}=o(y);let l=s||r;return F(t)&&(l=t),P(t)&&(l=t(o(p))),l});function N(){const{show:s,ifShow:t}=e.schema,{showAdvancedButton:r}=e.formProps,l=r&&F(e.isAdvanced)?e.isAdvanced:!0;let n=!0,a=!0;return F(s)&&(n=s),F(t)&&(a=t),P(s)&&(n=s(o(p))),P(t)&&(a=t(o(p))),n=n&&l,{isShow:n,isIfShow:a}}function x(){var M;const{rules:s=[],component:t,rulesMessageJoinLabel:r,label:l,dynamicRules:n,required:a}=e.schema;if(P(n))return n(o(p));let c=ue(s);const{rulesMessageJoinLabel:S}=e.formProps,w=(Reflect.has(e.schema,"rulesMessageJoinLabel")?r:S)?l:"",m=t?G(t)+w:w;function h(d,i){const C=d.message||m;return i===void 0||he(i)||Array.isArray(i)&&i.length===0||typeof i=="string"&&i.trim()===""||typeof i=="object"&&Reflect.has(i,"checked")&&Reflect.has(i,"halfChecked")&&Array.isArray(i.checked)&&Array.isArray(i.halfChecked)&&i.checked.length===0&&i.halfChecked.length===0?Promise.reject(C):Promise.resolve()}const j=P(a)?a(o(p)):a;if(j)if(!c||c.length===0){const d=K.includes(t||"Input")?"blur":"change";c=[{required:j,validator:h,trigger:d}]}else c.findIndex(i=>Reflect.has(i,"required"))===-1&&c.push({required:j,validator:h});const T=c.findIndex(d=>Reflect.has(d,"required")&&!Reflect.has(d,"validator"));if(T!==-1){const d=c[T],{isShow:i}=N();if(i||(d.required=!1),t){d.message=d.message||m,(t.includes("Input")||t.includes("Textarea"))&&(d.whitespace=!0);const C=(M=o(y))==null?void 0:M.valueFormat;ge(d,t,C)}}const A=c.findIndex(d=>d.max);return A!==-1&&!c[A].validator&&(c[A].message=c[A].message||b("component.form.maxTip",[c[A].max])),c}function V(){var d;if(!xe(e.schema))return null;const{renderComponentContent:s,component:t,field:r,changeEvent:l="change",valueField:n}=e.schema,a=t&&["Switch","Checkbox"].includes(t),c=`on${be(l)}`,S={[c]:(...i)=>{const[C]=i;h[c]&&h[c](...i);const B=C?C.target:null,Y=B?a?B.checked:B.value:C;e.setFormModel(r,Y,e.schema)}},R=J.get(t),{autoSetPlaceHolder:w,size:m}=e.formProps,h=E(f({allowClear:!0,size:m},o(y)),{disabled:o(I),readonly:o(L)});!h.disabled&&w&&t!=="RangePicker"&&t&&(h.placeholder=((d=o(y))==null?void 0:d.placeholder)||G(t)),h.codeField=r,h.formValues=o(p);const T={[n||(a?"checked":"value")]:e.formModel[r]},A=f(f(f({},h),S),T);if(!s)return g(R,A,null);const M=P(s)?f({},s(o(p),{disabled:o(I),readonly:o(L)})):{default:()=>s};return g(R,A,_(M)?M:{default:()=>[M]})}function D(){const{label:s,helpMessage:t,helpComponentProps:r,subLabel:l}=e.schema,n=l?g("span",null,[s,ie(" "),g("span",{class:"text-secondary"},[l])]):s,a=P(t)?t(o(p)):t;return!a||Array.isArray(a)&&a.length===0?n:g("span",null,[n,g(me,H({placement:"top",class:"mx-1",text:a},r),null)])}function X(){const{itemProps:s,slot:t,render:r,field:l,suffix:n,component:a}=e.schema,{labelCol:c,wrapperCol:S}=o(q),{colon:R}=e.formProps,w={disabled:o(I),readonly:o(L)};if(a==="Divider"){let m;return g(U,{span:24},{default:()=>[g(Ce,o(y),_(m=D())?m:{default:()=>[m]})]})}else if(a==="BasicTitle"){let m;return g(Q.Item,{labelCol:c,wrapperCol:S,name:l,class:{"suffix-item":!!n}},{default:()=>[g(fe,o(y),_(m=D())?m:{default:()=>[m]})]})}else{const m=()=>t?$(u,t,o(p),w):r?r(o(p),w):V(),h=!!n,j=P(n)?n(o(p)):n;return a&&K.includes(a)&&e.schema&&(e.schema.itemProps=f({autoLink:!1},e.schema.itemProps)),g(Q.Item,H({name:l,colon:R,class:{"suffix-item":h}},s,{label:D(),rules:x(),labelCol:c,wrapperCol:S}),{default:()=>[g("div",{style:"display:flex"},[g("div",{style:"flex:1;"},[m()]),h&&g("span",{class:"suffix"},[j])])]})}}return()=>{let s;const{colProps:t={},colSlot:r,renderColContent:l,component:n,slot:a}=e.schema;if(!n||!J.has(n)&&!a)return null;const{baseColProps:c={}}=e.formProps,S=f(f({},c),t),{isIfShow:R,isShow:w}=N(),m=o(p),h={disabled:o(I),readonly:o(L)};return R&&ae(g(U,S,_(s=(()=>r?$(u,r,m,h):l?l(m,h):X())())?s:{default:()=>[s]}),[[ce,w]])}}});export{De as _};
